<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Mihai Ion - L12: Descriptive stats</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Mihai Ion</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../research.html" rel="" target="">
 <span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../../teaching.html" rel="" target="" aria-current="page">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../CV/Mihai Ion CV.pdf" rel="" target="">
 <span class="menu-text">CV</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">FIN 525</li><li class="breadcrumb-item"><a href="../../../teaching/FIN 525/lectures/lecture00_Jupyter_Basics.html">Lectures</a></li><li class="breadcrumb-item"><a href="../../../teaching/FIN 525/lectures/lecture12_descriptive_stats_unconditional.html">L12: Descriptive stats</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Teaching</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">FIN 525</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Lectures</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture00_Jupyter_Basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L00: Jupyter basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture01_Introduction_and_Setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L01: Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture02_codeExecution_variables_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L02: Variables, types, operators</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture03_Data_Structures_Dot_Notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L03: Data structures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture04_Conditional_Statements_and_Iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L04: Conditionals, loops</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture05_Functions_and_Packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L05: Functions, packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture06_pandas_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L06: Pandas intro</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture07_data_input_output.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L07: Pandas I/O</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture08_filtering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L08: Pandas filtering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture09_data_cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L09: Pandas data cleaning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture10_merging_reshaping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L10: Merging, reshaping datasets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture11_Dates_Lags_Sorting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L11: Dates, lags, sorting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture12_descriptive_stats_unconditional.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">L12: Descriptive stats</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture13_wins_groupby_apply_transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L13: Conditional stats, outliers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture14_conditional_stats_applied.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L14: Conditional stats applied</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture15_regression_intro1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L15: Linear regression intro</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture16_regression_intro2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L16: Linear regression applications</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture17_regression_application_panel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L17: Panel regression intro</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture18_robust_panel_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L18: Robust panel regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture19_regression_application_timeseries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L19: Robust timeseries regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture20_backtesting_dataprep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L20: Backtesting - data prep</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture21_sortvar_sumstats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L21: Backtesting - sumstats</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture22_portfolio_returns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L22: Backtesting -returns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 525/lectures/lecture23_riskadjusted_ret.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L23: Backtesting - risk adjustment</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">FIN 421</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Lectures</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/L01_Introduction_and_Setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L01: Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/L02_Foundations_1_Past_Returns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L02: Analyzing past returns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/L03_Foundations_2_Future_Returns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L03: Modeling future returns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/L04_Portfolio_Theory_1_Mechanics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L04: Portfolio theory intro</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/L05_Portfolio_Theory_2_Optimal_Capital_Allocation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L05: Optimal capital allocation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/L06_Portfolio_Theory_3_Tangency_Portfolios.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L06: Tangency portfolios</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/L07_08_Portfolio_Theory_4_Optimal_Asset_Allocation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L07_08: Optimal asset allocation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/L09_Review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L09: Review</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 10 11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L10_11: Statistical models of returns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L12: CAPM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L13: Cost of equity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L14: Bond pricing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L15: Bond yields</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 16.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L16: Bond risk</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 17 Data Processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L17: Valuation data processing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 18 and 19 on Multiples Valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L18_19: Multiples valuation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 20 and 21 on DDM Valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L20_21: Dividend discount models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 22 and 23 on DCF Valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L22_23: Discounted cash flow analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 24 Sensitivity Analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L24: Valuation sensitivity analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 25 Option Intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L25: Options intro</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../teaching/FIN 421/lectures/Lecture 26 on Option Strategies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">L26: Risk management with options</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link active" data-scroll-target="#preliminaries">Preliminaries</a></li>
  <li><a href="#vizualization-tools-the-.plot-function" id="toc-vizualization-tools-the-.plot-function" class="nav-link" data-scroll-target="#vizualization-tools-the-.plot-function">Vizualization tools (the <code>.plot()</code> function)</a>
  <ul class="collapse">
  <li><a href="#line-plots" id="toc-line-plots" class="nav-link" data-scroll-target="#line-plots">Line plots</a></li>
  <li><a href="#scatter-plots" id="toc-scatter-plots" class="nav-link" data-scroll-target="#scatter-plots">Scatter plots</a></li>
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms">Histograms</a></li>
  <li><a href="#box-plots" id="toc-box-plots" class="nav-link" data-scroll-target="#box-plots">Box plots</a></li>
  </ul></li>
  <li><a href="#single-variable-statistics" id="toc-single-variable-statistics" class="nav-link" data-scroll-target="#single-variable-statistics">Single-variable statistics</a>
  <ul class="collapse">
  <li><a href="#the-.describe-function" id="toc-the-.describe-function" class="nav-link" data-scroll-target="#the-.describe-function">The <code>.describe()</code> function</a></li>
  <li><a href="#calculating-individual-statistics" id="toc-calculating-individual-statistics" class="nav-link" data-scroll-target="#calculating-individual-statistics">Calculating individual statistics</a>
  <ul class="collapse">
  <li><a href="#mean" id="toc-mean" class="nav-link" data-scroll-target="#mean"><code>.mean()</code></a></li>
  <li><a href="#var" id="toc-var" class="nav-link" data-scroll-target="#var"><code>.var()</code></a></li>
  <li><a href="#std" id="toc-std" class="nav-link" data-scroll-target="#std"><code>.std()</code></a></li>
  <li><a href="#median" id="toc-median" class="nav-link" data-scroll-target="#median"><code>.median()</code></a></li>
  </ul></li>
  <li><a href="#calculating-row-level-statistics" id="toc-calculating-row-level-statistics" class="nav-link" data-scroll-target="#calculating-row-level-statistics">Calculating row-level statistics</a></li>
  <li><a href="#creating-your-own-list-of-summary-statistics-with-the-.agg-function" id="toc-creating-your-own-list-of-summary-statistics-with-the-.agg-function" class="nav-link" data-scroll-target="#creating-your-own-list-of-summary-statistics-with-the-.agg-function">Creating your own list of summary statistics with the <code>.agg()</code> function</a></li>
  </ul></li>
  <li><a href="#two-variable-statistics" id="toc-two-variable-statistics" class="nav-link" data-scroll-target="#two-variable-statistics">Two-variable statistics</a>
  <ul class="collapse">
  <li><a href="#covariance-.cov" id="toc-covariance-.cov" class="nav-link" data-scroll-target="#covariance-.cov">Covariance: <code>.cov()</code></a></li>
  <li><a href="#correlation-.corr" id="toc-correlation-.corr" class="nav-link" data-scroll-target="#correlation-.corr">Correlation: <code>.corr()</code></a></li>
  <li><a href="#autocorrelation-.autocorr" id="toc-autocorrelation-.autocorr" class="nav-link" data-scroll-target="#autocorrelation-.autocorr">Autocorrelation: <code>.autocorr()</code></a></li>
  </ul></li>
  <li><a href="#rolling-statistics" id="toc-rolling-statistics" class="nav-link" data-scroll-target="#rolling-statistics">Rolling statistics</a>
  <ul class="collapse">
  <li><a href="#fixed-window-rolling-statistics" id="toc-fixed-window-rolling-statistics" class="nav-link" data-scroll-target="#fixed-window-rolling-statistics">Fixed-window rolling statistics</a></li>
  <li><a href="#expanding-window-rolling-statistics" id="toc-expanding-window-rolling-statistics" class="nav-link" data-scroll-target="#expanding-window-rolling-statistics">Expanding-window rolling statistics</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">L12: Descriptive stats</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="preliminaries" class="level1">
<h1>Preliminaries</h1>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas_datareader <span class="im">as</span> pdr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download data on Fama-French three factors (we will use this data in all our examples)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>ff3 <span class="op">=</span> pdr.DataReader(<span class="st">'F-F_Research_Data_Factors'</span>, <span class="st">'famafrench'</span>, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'1970-01-01'</span>,<span class="st">'2020-12-31'</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                    )[<span class="dv">0</span>]<span class="op">/</span><span class="dv">100</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>ff3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Mkt-RF</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-01</td>
<td>-0.0810</td>
<td>0.0295</td>
<td>0.0312</td>
<td>0.0060</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1970-02</td>
<td>0.0513</td>
<td>-0.0256</td>
<td>0.0393</td>
<td>0.0062</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-03</td>
<td>-0.0106</td>
<td>-0.0230</td>
<td>0.0399</td>
<td>0.0057</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1970-04</td>
<td>-0.1100</td>
<td>-0.0612</td>
<td>0.0617</td>
<td>0.0050</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-05</td>
<td>-0.0692</td>
<td>-0.0456</td>
<td>0.0332</td>
<td>0.0053</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-08</td>
<td>0.0763</td>
<td>-0.0022</td>
<td>-0.0293</td>
<td>0.0001</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2020-09</td>
<td>-0.0363</td>
<td>-0.0004</td>
<td>-0.0266</td>
<td>0.0001</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-10</td>
<td>-0.0210</td>
<td>0.0439</td>
<td>0.0419</td>
<td>0.0001</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2020-11</td>
<td>0.1247</td>
<td>0.0574</td>
<td>0.0199</td>
<td>0.0001</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-12</td>
<td>0.0463</td>
<td>0.0483</td>
<td>-0.0156</td>
<td>0.0001</td>
</tr>
</tbody>
</table>

<p>612 rows × 4 columns</p>
</div>
</div>
</div>
<div class="cell" data-scrolled="true" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename for convenience</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ff3.rename(columns <span class="op">=</span> {<span class="st">'Mkt-RF'</span>: <span class="st">'MKT'</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ff3.head(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-01</td>
<td>-0.0810</td>
<td>0.0295</td>
<td>0.0312</td>
<td>0.0060</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1970-02</td>
<td>0.0513</td>
<td>-0.0256</td>
<td>0.0393</td>
<td>0.0062</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="vizualization-tools-the-.plot-function" class="level1">
<h1>Vizualization tools (the <code>.plot()</code> function)</h1>
<p>There are many different ways to visualize the data from a Pandas dataframe (e.g.&nbsp;the <code>matplotlib</code> and <code>seaborn</code> packages are very popular). However, for the purpose of this class, the <code>.plot()</code> function that comes with the Pandas package will be sufficient.</p>
<p>Below we work through some examples of the most common types of plots used for financial data: line plots, scatter plots, histograms, and box plots.</p>
<p>Abbreviated syntax:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>DataFrame.plot(kind <span class="op">=</span> <span class="st">'line'</span>, x <span class="op">=</span> <span class="va">None</span>, y <span class="op">=</span> <span class="va">None</span>, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>               title <span class="op">=</span> <span class="va">None</span>, xlabel <span class="op">=</span> <span class="va">None</span>, ylabel <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>               legend <span class="op">=</span> <span class="va">True</span>, grid <span class="op">=</span> <span class="va">False</span>, layout <span class="op">=</span> <span class="va">None</span>, </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>               sharex <span class="op">=</span> <span class="va">True</span>, sharey <span class="op">=</span> <span class="va">False</span>, figsize <span class="op">=</span> <span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>More detail on the <code>.plot()</code> function can be found here: https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.plot.html</p>
<section id="line-plots" class="level2">
<h2 class="anchored" data-anchor-id="line-plots">Line plots</h2>
<p>Note that, by default, <code>plot()</code> creates a “line” plot, using the index of the dataframe for the x axis (in our case, the Date):</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ff3.plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-5-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>You can specify which variables you want plotted by subsetting the overall dataframe first:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'MKT'</span>,<span class="st">'RF'</span>]].plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-6-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Below, we show more of the functionality of <code>.plot()</code> through a more involved example:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'MKT'</span>,<span class="st">'RF'</span>]].plot(kind <span class="op">=</span> <span class="st">'line'</span>, </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                       title <span class="op">=</span> <span class="st">'Market and risk-free returns'</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                       xlabel <span class="op">=</span> <span class="st">'Year'</span>, ylabel <span class="op">=</span> <span class="st">'Return(%)'</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                       legend <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                       grid <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                      figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">3</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="scatter-plots" class="level2">
<h2 class="anchored" data-anchor-id="scatter-plots">Scatter plots</h2>
<p>To create a scatter plot, we need to change the <code>kind</code> parameter to “scatter” and also specify what is on the x axis and what is on the y axis:</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ff3.plot(x <span class="op">=</span> <span class="st">'RF'</span>, y <span class="op">=</span> <span class="st">'MKT'</span>, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>         kind <span class="op">=</span> <span class="st">'scatter'</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>         xlabel <span class="op">=</span> <span class="st">'Risk-free returns'</span>, ylabel <span class="op">=</span> <span class="st">'Market returns'</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>         grid <span class="op">=</span> <span class="va">True</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="histograms" class="level2">
<h2 class="anchored" data-anchor-id="histograms">Histograms</h2>
<p>For a histogram, we use <code>kind='hist'</code> and then use <code>subplots=True</code> to specify that we want each variable to have its own histogram, in a separate subplot:</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'MKT'</span>,<span class="st">'RF'</span>]].plot(kind <span class="op">=</span> <span class="st">'hist'</span>, subplots <span class="op">=</span> <span class="va">True</span>, bins <span class="op">=</span> <span class="dv">20</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-9-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can change the position of the subplots relative to each other using the <code>layout</code> parameter:</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'MKT'</span>,<span class="st">'RF'</span>]].plot(kind <span class="op">=</span> <span class="st">'hist'</span>, subplots <span class="op">=</span> <span class="va">True</span>, bins <span class="op">=</span> <span class="dv">20</span>, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                       layout <span class="op">=</span> (<span class="dv">1</span>,<span class="dv">2</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can create a continuous approximation of the histogram using <code>kind='density'</code>:</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'MKT'</span>,<span class="st">'RF'</span>]].plot(kind <span class="op">=</span> <span class="st">'density'</span>, subplots <span class="op">=</span> <span class="va">True</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="box-plots" class="level2">
<h2 class="anchored" data-anchor-id="box-plots">Box plots</h2>
<p>For box plots, we use <code>kind='box'</code>:</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'MKT'</span>,<span class="st">'RF'</span>]].plot(kind <span class="op">=</span> <span class="st">'box'</span>, subplots <span class="op">=</span> <span class="va">True</span>, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>                       figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">4</span>), sharey <span class="op">=</span> <span class="va">False</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-12-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="single-variable-statistics" class="level1">
<h1>Single-variable statistics</h1>
<p>We start by looking at statistics that describe a single variable (as opposed to the relationship between two variables).</p>
<p>Since our data will almost always be in a Pandas dataframe, we will use pandas functions (attributes) to calculate sample statistics, but many other packages can be used to calculate summary statistics for your data (e.g.&nbsp;the <code>numpy</code> package allows you to calculate descriptive statistics if your data is in a Numpy array).</p>
<section id="the-.describe-function" class="level2">
<h2 class="anchored" data-anchor-id="the-.describe-function">The <code>.describe()</code> function</h2>
<p>We can use the <code>.describe()</code> function to get some standard descriptive statistics for the entire dataset.</p>
<p>Syntax:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>DataFrame.describe(percentiles<span class="op">=</span><span class="va">None</span>, include<span class="op">=</span><span class="va">None</span>, exclude<span class="op">=</span><span class="va">None</span>, datetime_is_numeric<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The default is for <code>.describe()</code> to produce summary statistics only for numerical data types in the dataframe. You can change this with the <code>include</code> and <code>exclude</code> parameters.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ff3.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>612.000000</td>
<td>612.000000</td>
<td>612.00000</td>
<td>612.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.005926</td>
<td>0.001404</td>
<td>0.00253</td>
<td>0.003723</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>0.045952</td>
<td>0.030765</td>
<td>0.02963</td>
<td>0.002801</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>-0.232400</td>
<td>-0.172900</td>
<td>-0.14020</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>-0.020200</td>
<td>-0.017400</td>
<td>-0.01435</td>
<td>0.001300</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>0.010250</td>
<td>0.001150</td>
<td>0.00215</td>
<td>0.003900</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>0.035775</td>
<td>0.018950</td>
<td>0.01735</td>
<td>0.005300</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>0.161000</td>
<td>0.214800</td>
<td>0.12480</td>
<td>0.013500</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The <code>percentiles</code> parameter allows you to specify which percentiles you want <code>.describe()</code> to calculate (default is 25th, 50th and 75th percentiles). For example, below, we only ask for the 50th percentile (the median):</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'SMB'</span>,<span class="st">'HML'</span>]].describe(percentiles <span class="op">=</span> [<span class="fl">0.5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>612.000000</td>
<td>612.00000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.001404</td>
<td>0.00253</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>0.030765</td>
<td>0.02963</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>-0.172900</td>
<td>-0.14020</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">50%</td>
<td>0.001150</td>
<td>0.00215</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>0.214800</td>
<td>0.12480</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="calculating-individual-statistics" class="level2">
<h2 class="anchored" data-anchor-id="calculating-individual-statistics">Calculating individual statistics</h2>
<p>Each individual statistic produced by <code>.describe()</code> has its own function that can be applied either to the entire dataframe or to subsets of it. Below I only show examples for mean, variance, standard deviation and median (but you can also use <code>.count()</code>, <code>.min()</code>, <code>.max()</code>, <code>.sum()</code> and many others).</p>
<section id="mean" class="level3">
<h3 class="anchored" data-anchor-id="mean"><code>.mean()</code></h3>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Means:'</span>) </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>ff3.mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Means:</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>MKT    0.005926
SMB    0.001404
HML    0.002530
RF     0.003723
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="var" class="level3">
<h3 class="anchored" data-anchor-id="var"><code>.var()</code></h3>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Variances:'</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>ff3.var()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Variances:</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>MKT    0.002112
SMB    0.000946
HML    0.000878
RF     0.000008
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="std" class="level3">
<h3 class="anchored" data-anchor-id="std"><code>.std()</code></h3>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Standard deviations'</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>ff3.std()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Standard deviations</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>MKT    0.045952
SMB    0.030765
HML    0.029630
RF     0.002801
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="median" class="level3">
<h3 class="anchored" data-anchor-id="median"><code>.median()</code></h3>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Medians:'</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>ff3.median()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Medians:</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>MKT    0.01025
SMB    0.00115
HML    0.00215
RF     0.00390
dtype: float64</code></pre>
</div>
</div>
<p><strong>Challenge:</strong></p>
<p>Note that the output of <code>.describe()</code> is also a dataframe. So we can use <code>.loc[]</code> to access specific numbers in that output table.</p>
<p>Use the space below to calculate and print the interquartile range (IQR = percentile 75 minus percentile 25) for the ‘MKT’ variable:</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> ff3.describe()</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>612.000000</td>
<td>612.000000</td>
<td>612.00000</td>
<td>612.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.005926</td>
<td>0.001404</td>
<td>0.00253</td>
<td>0.003723</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>0.045952</td>
<td>0.030765</td>
<td>0.02963</td>
<td>0.002801</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>-0.232400</td>
<td>-0.172900</td>
<td>-0.14020</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>-0.020200</td>
<td>-0.017400</td>
<td>-0.01435</td>
<td>0.001300</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>0.010250</td>
<td>0.001150</td>
<td>0.00215</td>
<td>0.003900</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>0.035775</td>
<td>0.018950</td>
<td>0.01735</td>
<td>0.005300</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>0.161000</td>
<td>0.214800</td>
<td>0.12480</td>
<td>0.013500</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>a.index</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>Index(['count', 'mean', 'std', 'min', '25%', '50%', '75%', 'max'], dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.loc[<span class="st">'75%'</span>,<span class="st">'MKT'</span>] <span class="op">-</span> a.loc[<span class="st">'25%'</span>,<span class="st">'MKT'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.055975</code></pre>
</div>
</div>
</section>
</section>
<section id="calculating-row-level-statistics" class="level2">
<h2 class="anchored" data-anchor-id="calculating-row-level-statistics">Calculating row-level statistics</h2>
<p>All statistical functions in Pandas (e.g.&nbsp;<code>.mean()</code>, <code>.median()</code>, etc) have an <code>axis</code> argument that allows you to specify if you want that statistic to be calculated column-wise (axis=0, the default) or row-wise (axis=1).</p>
<p>For example, if we want to know, each month, which of the columns in <code>ff3</code> had the highest return, we would use:</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>ff3.<span class="bu">max</span>(axis <span class="op">=</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>Date
1970-01    0.0312
1970-02    0.0513
1970-03    0.0399
1970-04    0.0617
1970-05    0.0332
            ...  
2020-08    0.0763
2020-09    0.0001
2020-10    0.0439
2020-11    0.1247
2020-12    0.0483
Freq: M, Length: 612, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>ff3.head(<span class="dv">2</span>) <span class="co">#quick check if the above worked</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-01</td>
<td>-0.0810</td>
<td>0.0295</td>
<td>0.0312</td>
<td>0.0060</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1970-02</td>
<td>0.0513</td>
<td>-0.0256</td>
<td>0.0393</td>
<td>0.0062</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>As usual, we can also calculate row-wise statistics using only a subset of the columns:</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'SMB'</span>,<span class="st">'HML'</span>]].<span class="bu">max</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>Date
1970-01    0.0312
1970-02    0.0393
1970-03    0.0399
1970-04    0.0617
1970-05    0.0332
            ...  
2020-08   -0.0022
2020-09   -0.0004
2020-10    0.0439
2020-11    0.0574
2020-12    0.0483
Freq: M, Length: 612, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="creating-your-own-list-of-summary-statistics-with-the-.agg-function" class="level2">
<h2 class="anchored" data-anchor-id="creating-your-own-list-of-summary-statistics-with-the-.agg-function">Creating your own list of summary statistics with the <code>.agg()</code> function</h2>
<p>If we want a different selection of summary statistics than the one offered by the <code>.describe()</code> function, we can use the <code>.agg()</code> function to specify exactly which statistics we want:</p>
<p>Syntax:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>DataFrame.agg(func<span class="op">=</span><span class="va">None</span>, axis<span class="op">=</span><span class="dv">0</span>, <span class="op">*</span>args, <span class="op">**</span>kwargs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you want the same stats for all variables, just provide a list of the names of the functions you want to be used (e.g.&nbsp;use ‘mean’ for the <code>.mean()</code> function, ‘std’ for the <code>.std()</code> function etc.).</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>ff3.agg(func <span class="op">=</span> [<span class="st">'mean'</span>,<span class="st">'std'</span>,<span class="st">'median'</span>,<span class="st">'sum'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.005926</td>
<td>0.001404</td>
<td>0.00253</td>
<td>0.003723</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">std</td>
<td>0.045952</td>
<td>0.030765</td>
<td>0.02963</td>
<td>0.002801</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">median</td>
<td>0.010250</td>
<td>0.001150</td>
<td>0.00215</td>
<td>0.003900</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">sum</td>
<td>3.626600</td>
<td>0.859400</td>
<td>1.54860</td>
<td>2.278300</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>You can also specify different functions (stats) for each variable:</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>ff3.agg(func <span class="op">=</span> {<span class="st">'MKT'</span>:[<span class="st">'mean'</span>,<span class="st">'median'</span>], <span class="st">'SMB'</span>:[<span class="st">'mean'</span>,<span class="st">'std'</span>]})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.005926</td>
<td>0.001404</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">median</td>
<td>0.010250</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>NaN</td>
<td>0.030765</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><strong>Challenge:</strong></p>
<p>Create a table that shows just the mean and standard deviation for the SMB and HML variables</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'SMB'</span>,<span class="st">'HML'</span>]].agg([<span class="st">'mean'</span>,<span class="st">'std'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">mean</td>
<td>0.001404</td>
<td>0.00253</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">std</td>
<td>0.030765</td>
<td>0.02963</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="two-variable-statistics" class="level1">
<h1>Two-variable statistics</h1>
<p>These are statistics that describe the relation between two variables. The most commonly used ones are the <strong>covariance* and the </strong>correlation<strong>. Both of these try to quantify the strength of the </strong>linear** relation between the two variables. The main difference between them is that the correlation coefficient is bounded between -1 and 1 and so it is easier to interpret.</p>
<p><em>If two variables are tightly related to each other, but not in a linear fashion (e.g.&nbsp;<span class="math inline">\(Y = X^4\)</span>), the covariance and correlation will <strong>underestimate</strong> the strength of that relation.</em></p>
<section id="covariance-.cov" class="level2">
<h2 class="anchored" data-anchor-id="covariance-.cov">Covariance: <code>.cov()</code></h2>
<p>The <code>cov()</code> function produces a covariance matrix for the variables (columns) in the dataframe. The numbers on the diagonal are actually variances. Each number on the off-diagonal is the covariance between the two variables specified in the column/row headers.</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>ff3.cov()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">MKT</td>
<td>0.002112</td>
<td>0.000405</td>
<td>-0.000308</td>
<td>-0.000011</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">SMB</td>
<td>0.000405</td>
<td>0.000946</td>
<td>-0.000163</td>
<td>-0.000004</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">HML</td>
<td>-0.000308</td>
<td>-0.000163</td>
<td>0.000878</td>
<td>0.000009</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">RF</td>
<td>-0.000011</td>
<td>-0.000004</td>
<td>0.000009</td>
<td>0.000008</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The output table above is a dataframe, so we can access individual numbers in it using the <code>.loc[]</code> operator.</p>
<p>For example, below, we extract the covariance between the ‘MKT’ and ‘SMB’ variables:</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>ff3.cov().loc[<span class="st">'MKT'</span>, <span class="st">'SMB'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>0.0004047944073253961</code></pre>
</div>
</div>
<p>Remember, if you want to use these estimates later on, you need to store them as new variables:</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>covmat <span class="op">=</span> ff3.cov()</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>covmat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">MKT</td>
<td>0.002112</td>
<td>0.000405</td>
<td>-0.000308</td>
<td>-0.000011</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">SMB</td>
<td>0.000405</td>
<td>0.000946</td>
<td>-0.000163</td>
<td>-0.000004</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">HML</td>
<td>-0.000308</td>
<td>-0.000163</td>
<td>0.000878</td>
<td>0.000009</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">RF</td>
<td>-0.000011</td>
<td>-0.000004</td>
<td>0.000009</td>
<td>0.000008</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>cov_mkt_smb <span class="op">=</span> covmat.loc[<span class="st">'MKT'</span>, <span class="st">'SMB'</span>]</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>cov_mkt_smb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>0.0004047944073253961</code></pre>
</div>
</div>
</section>
<section id="correlation-.corr" class="level2">
<h2 class="anchored" data-anchor-id="correlation-.corr">Correlation: <code>.corr()</code></h2>
<p>Just like with covariance, we can calculate a correlation matrix for the entire dataset:</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>ff3.corr()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">MKT</td>
<td>1.000000</td>
<td>0.286331</td>
<td>-0.225911</td>
<td>-0.089092</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">SMB</td>
<td>0.286331</td>
<td>1.000000</td>
<td>-0.178917</td>
<td>-0.044725</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">HML</td>
<td>-0.225911</td>
<td>-0.178917</td>
<td>1.000000</td>
<td>0.108959</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">RF</td>
<td>-0.089092</td>
<td>-0.044725</td>
<td>0.108959</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Or we can extract the correlation of a particular pair of variables in your dataset:</p>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>ff3.corr().loc[<span class="st">'MKT'</span>, <span class="st">'SMB'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>0.2863310434640219</code></pre>
</div>
</div>
<p><strong>Challenge:</strong></p>
<p>Calculate the correlation between ‘MKT’ returns in the current month and the SMB return from 12 months ago.</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>smb <span class="op">=</span> ff3[<span class="st">'SMB'</span>].to_frame()</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>smb[<span class="st">'smb_lag12'</span>] <span class="op">=</span> smb[<span class="st">'SMB'</span>].shift(<span class="dv">12</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>smb.corr()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">smb_lag12</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">SMB</td>
<td>1.000000</td>
<td>0.094283</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">smb_lag12</td>
<td>0.094283</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="autocorrelation-.autocorr" class="level2">
<h2 class="anchored" data-anchor-id="autocorrelation-.autocorr">Autocorrelation: <code>.autocorr()</code></h2>
<p>The autocorrelation of a variable is the correlation between its current value and a value from the past. So there is not one single autocorrelation for any given variable, there is one autocorrelation for every “lag” between the current value and the value from the past. For example, below, we calculate the “1-month autocorrelation” and “12-month autocorrelation” for the market portfolio returns:</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>mkt_acor1 <span class="op">=</span> ff3[<span class="st">'MKT'</span>].autocorr(lag <span class="op">=</span> <span class="dv">1</span>) </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"1-month autocorrelation of market returns:"</span>, mkt_acor1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1-month autocorrelation of market returns: 0.06457337999767149</code></pre>
</div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>mkt_acor12 <span class="op">=</span> ff3[<span class="st">'MKT'</span>].autocorr(lag <span class="op">=</span> <span class="dv">12</span>) </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"12-month autocorrelation of market returns:"</span>, mkt_acor12)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>12-month autocorrelation of market returns: 0.02828759092532415</code></pre>
</div>
</div>
<p>And below we verify that the autocorrelation is nothing but the correlation between the current value and a lagged value:</p>
<div class="cell" data-scrolled="true" data-execution_count="36">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>ff3[<span class="st">'mkt_lag1'</span>] <span class="op">=</span> ff3[<span class="st">'MKT'</span>].shift(<span class="dv">1</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>ff3.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
<th data-quarto-table-cell-role="th">mkt_lag1</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-01</td>
<td>-0.0810</td>
<td>0.0295</td>
<td>0.0312</td>
<td>0.0060</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1970-02</td>
<td>0.0513</td>
<td>-0.0256</td>
<td>0.0393</td>
<td>0.0062</td>
<td>-0.0810</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-03</td>
<td>-0.0106</td>
<td>-0.0230</td>
<td>0.0399</td>
<td>0.0057</td>
<td>0.0513</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1970-04</td>
<td>-0.1100</td>
<td>-0.0612</td>
<td>0.0617</td>
<td>0.0050</td>
<td>-0.0106</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-05</td>
<td>-0.0692</td>
<td>-0.0456</td>
<td>0.0332</td>
<td>0.0053</td>
<td>-0.1100</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-scrolled="true" data-execution_count="37">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>ff3[[<span class="st">'MKT'</span>,<span class="st">'mkt_lag1'</span>]].corr()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">mkt_lag1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">MKT</td>
<td>1.000000</td>
<td>0.064573</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mkt_lag1</td>
<td>0.064573</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="rolling-statistics" class="level1">
<h1>Rolling statistics</h1>
<p>These are statistics that are re-calculated at each point in time, using either - a fixed number of data points from the past - these are called “fixed window” rolling statistics - can be calculated with the “rolling” Pandas function - all the data from the past (expanding window) - these are called “expanding window” rolling statistics - can be calculated with the “expanding” Pandas function</p>
<p>Both the “expanding” and the “rolling” functions should be followed by the name of the statistic that you want to calculate.</p>
<section id="fixed-window-rolling-statistics" class="level2">
<h2 class="anchored" data-anchor-id="fixed-window-rolling-statistics">Fixed-window rolling statistics</h2>
<p>We use the <code>.rolling()</code> function to calculate summary statistics at each point in time “t” using only the observations from “t - w” to “t”, where “w” is referred to as the “window” length.</p>
<p>Syntax:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>DataFrame.rolling(window, min_periods<span class="op">=</span><span class="va">None</span>, center<span class="op">=</span><span class="va">False</span>, win_type<span class="op">=</span><span class="va">None</span>, on<span class="op">=</span><span class="va">None</span>, axis<span class="op">=</span><span class="dv">0</span>, closed<span class="op">=</span><span class="va">None</span>, method<span class="op">=</span><span class="st">'single'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As an example, below, we calculate 60-month rolling means (i.e.&nbsp;“w” is 60) for all the variables in <code>ff3</code>:</p>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>rolling_means <span class="op">=</span> ff3.rolling(<span class="dv">60</span>).mean()</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>rolling_means</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">SMB</th>
<th data-quarto-table-cell-role="th">HML</th>
<th data-quarto-table-cell-role="th">RF</th>
<th data-quarto-table-cell-role="th">mkt_lag1</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1970-02</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-03</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1970-04</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-05</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-08</td>
<td>0.011497</td>
<td>-0.001702</td>
<td>-0.008360</td>
<td>0.000888</td>
<td>0.009218</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2020-09</td>
<td>0.011403</td>
<td>-0.001270</td>
<td>-0.008900</td>
<td>0.000890</td>
<td>0.011497</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-10</td>
<td>0.009762</td>
<td>-0.000227</td>
<td>-0.008127</td>
<td>0.000892</td>
<td>0.011403</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2020-11</td>
<td>0.011747</td>
<td>0.000130</td>
<td>-0.007732</td>
<td>0.000893</td>
<td>0.009762</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-12</td>
<td>0.012880</td>
<td>0.001403</td>
<td>-0.007560</td>
<td>0.000893</td>
<td>0.011747</td>
</tr>
</tbody>
</table>

<p>612 rows × 5 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>rolling_means[<span class="st">'MKT'</span>].plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-40-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can calculate rolling versions for all summary statistics that the pandas package knows how to calculate. For example, below, we calculate the rolling, 36-month standard deviations of market returns, and we plot these over time:</p>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>ff3[<span class="st">'MKT'</span>].rolling(<span class="dv">36</span>).std().plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-41-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>We can even calculate rolling versions of two-variable summary statistics (like correlation and covariance). However, we have to remember that <code>.corr()</code> and <code>.cov()</code> produce matrices not single numbers. So if we want rolling correlations between, say, market returns and the risk-free rate, the cell below will produce a correlation matrix at each point in time:</p>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>not_like_this <span class="op">=</span> ff3[[<span class="st">'MKT'</span>,<span class="st">'RF'</span>]].rolling(<span class="dv">60</span>).corr()</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>not_like_this</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">MKT</th>
<th data-quarto-table-cell-role="th">RF</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">1970-01</td>
<td data-quarto-table-cell-role="th">MKT</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">RF</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">1970-02</td>
<td data-quarto-table-cell-role="th">MKT</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">RF</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1970-03</td>
<td data-quarto-table-cell-role="th">MKT</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-10</td>
<td data-quarto-table-cell-role="th">RF</td>
<td>-0.171608</td>
<td>1.000000</td>
</tr>
<tr class="even">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">2020-11</td>
<td data-quarto-table-cell-role="th">MKT</td>
<td>1.000000</td>
<td>-0.212314</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">RF</td>
<td>-0.212314</td>
<td>1.000000</td>
</tr>
<tr class="even">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">2020-12</td>
<td data-quarto-table-cell-role="th">MKT</td>
<td>1.000000</td>
<td>-0.240182</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">RF</td>
<td>-0.240182</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

<p>1224 rows × 2 columns</p>
</div>
</div>
</div>
<p>Instead, we need to supply one of the variables as a parameter to the <code>.corr()</code> function:</p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>just_the_coeff <span class="op">=</span> ff3[<span class="st">'MKT'</span>].rolling(<span class="dv">60</span>).corr(ff3[<span class="st">'RF'</span>])</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>just_the_coeff</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>Date
1970-01         NaN
1970-02         NaN
1970-03         NaN
1970-04         NaN
1970-05         NaN
             ...   
2020-08   -0.213687
2020-09   -0.213742
2020-10   -0.171608
2020-11   -0.212314
2020-12   -0.240182
Freq: M, Length: 612, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>just_the_coeff.plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-44-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="expanding-window-rolling-statistics" class="level2">
<h2 class="anchored" data-anchor-id="expanding-window-rolling-statistics">Expanding-window rolling statistics</h2>
<p>With expanding-window summary statistics, at each point in time, we use all the available data up to that point to calculate the statistic. We use the <code>.expanding()</code> function for this purpose, which also gives us the option to specify that we want to calculate the statistic only if we have a minimum number of observations available at that point (see the <code>min_period</code> parameter below):</p>
<p>Syntax:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>DataFrame.expanding(min_periods<span class="op">=</span><span class="dv">1</span>, center<span class="op">=</span><span class="va">None</span>, axis<span class="op">=</span><span class="dv">0</span>, method<span class="op">=</span><span class="st">'single'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that, if we don’t supply a large enough <code>min_periods</code>, in the beginning of the sample, the statistics will be calculated using a very low number of observations (starting with 1), so they will be quite volatile:</p>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>ff3[<span class="st">'MKT'</span>].expanding().mean().plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-45-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>This looks a lot more stable if we make sure each statistic is calculated using at least 36 observations:</p>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>ff3[<span class="st">'MKT'</span>].expanding(min_periods <span class="op">=</span> <span class="dv">36</span>).mean().plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-46-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>As another example, let’s look at the behavior of market volatility over time:</p>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>ff3[<span class="st">'MKT'</span>].expanding(min_periods <span class="op">=</span> <span class="dv">60</span>).std().plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-47-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Finally, below, we see that the correlation between market returns and tbill yields, while changing over time, is negative throughout (when we do not restrict ourselves to just the prior 60 observations):</p>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>ff3[<span class="st">'MKT'</span>].expanding(min_periods <span class="op">=</span> <span class="dv">60</span>).corr(ff3[<span class="st">'RF'</span>]).plot()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lecture12_descriptive_stats_unconditional_files/figure-html/cell-48-output-1.png" class="img-fluid"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/github\.com\/ionmihai\/ionmihai\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->



</body></html>